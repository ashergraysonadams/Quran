import os
import asyncio
import threading
from aiohttp import web
from telegram import Update
from telegram.ext import (
    ApplicationBuilder,
    CommandHandler,
    MessageHandler,
    ContextTypes,
    filters
)

TOKEN = os.environ.get("TOKEN")
QURAN_PAGES_DIR = os.path.join(os.path.dirname(__file__), "pages")
PORT = int(os.environ.get("PORT", 10000))

# â€”â€” Healthâ€check endpoint
async def health(request):
    return web.Response(text="OK")

async def start_health_server():
    app = web.Application()
    app.add_routes([web.get("/", health)])
    runner = web.AppRunner(app)
    await runner.setup()
    site = web.TCPSite(runner, "0.0.0.0", PORT)
    await site.start()

def spawn_health_server():
    loop = asyncio.new_event_loop()
    asyncio.set_event_loop(loop)
    loop.run_until_complete(start_health_server())
    loop.run_forever()

# â€”â€” Telegram handlers
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "ğŸ“– *ØªÙ‚Ø¯Ù…Ø© Ø§Ù„Ø³ÙŠØ¯ Ø­ÙŠØ¯Ø± Ø§Ù„Ù…ÙˆØ³ÙˆÙŠ*\n"
        "Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø±Ø­ÙŠÙ…ØŒ ÙˆØ¨Ù‡ Ù†Ø³ØªØ¹ÙŠÙ†.\n"
        "ğŸŒ™ Ø£Ø±Ø³Ù„ Ø±Ù‚Ù… Ø§Ù„ØµÙØ­Ø© (1â€“620) Ø£Ùˆ Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø­ÙƒÙ… Ù…Ø«Ù„:\n"
        "`Ù† Ø§Ù„Ø¥Ø¸Ù‡Ø§Ø±`ØŒ `Ù† Ø§Ù„Ø¥Ø¯ØºØ§Ù…`ØŒ `Ù… Ø§Ù„Ø¥Ø®ÙØ§Ø¡`ØŒ `Ù…Ø¯ Ø·Ø¨ÙŠØ¹ÙŠ`ØŒ `Ø¨Ø³Ù…Ù„Ø©`...",
        parse_mode="Markdown"
    )
async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text.strip().lower()

    if text == "Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…":
        return await update.message.reply_text("ÙˆØ¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø³Ù„Ø§Ù… ÙˆØ±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡")

    if "ØµÙ„ÙˆØ§Øª" in text and "Ù…Ø­Ù…Ø¯" in text:
        return await update.message.reply_text("Ø§Ù„Ù„Ù‡Ù… ØµÙÙ„ÙÙ‘ Ø¹ÙÙ„ÙÙ‰ Ù…ÙØ­ÙÙ…ÙÙ‘Ø¯Ù ÙˆÙØ¢Ù„Ù Ù…ÙØ­ÙÙ…ÙÙ‘Ø¯Ù")

    if text.isdigit():
        n = int(text)
        if 1 <= n <= 620:
            path = os.path.join(QURAN_PAGES_DIR, f"{n}.jpg")
            if os.path.exists(path):
                with open(path, "rb") as photo:
                    return await update.message.reply_photo(photo=photo)

    # Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ù†ÙˆÙ† Ø§Ù„Ø³Ø§ÙƒÙ†Ø© ÙˆØ§Ù„ØªÙ†ÙˆÙŠÙ†
    if text == "Ù† Ø§Ù„Ø¥Ø¸Ù‡Ø§Ø±":
        return await update.message.reply_text(
            "ğŸ”¹ *Ø§Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø­Ù„Ù‚ÙŠ (ÙÙŠ Ø§Ù„Ù†ÙˆÙ† Ø§Ù„Ø³Ø§ÙƒÙ†Ø© ÙˆØ§Ù„ØªÙ†ÙˆÙŠÙ†):*\n"
            "Ù‡Ùˆ Ù†Ø·Ù‚ Ø§Ù„Ù†ÙˆÙ† Ø§Ù„Ø³Ø§ÙƒÙ†Ø© Ø£Ùˆ Ø§Ù„ØªÙ†ÙˆÙŠÙ† Ø¨ÙˆØ¶ÙˆØ­ Ø¯ÙˆÙ† ØºÙ†Ø©ØŒ Ø¥Ø°Ø§ Ø¬Ø§Ø¡ Ø¨Ø¹Ø¯Ù‡Ø§ Ø£Ø­Ø¯ Ø­Ø±ÙˆÙ Ø§Ù„Ø­Ù„Ù‚.\n"
            "ğŸ§  Ø§Ù„Ø­Ø±ÙˆÙ: (Ø¡ØŒ Ù‡Ù€ØŒ Ø¹ØŒ Ø­ØŒ ØºØŒ Ø®)\n"
            "ğŸ§ª *Ø£Ù…Ø«Ù„Ø©:*\n"
            "â€¢ ï´¿Ù…ÙÙ†Ù’ Ù‡ÙØ§Ø¯Ùï´¾\n"
            "â€¢ ï´¿Ø¥ÙÙ†Ù’ Ù‡ÙÙˆÙï´¾\n"
            "â€¢ ï´¿Ù…ÙÙ†Ù’ Ø¹ÙÙ„Ù’Ù…Ùï´¾",
            parse_mode="Markdown"
        )

    if text == "Ù† Ø§Ù„Ø¥Ø¯ØºØ§Ù…":
        return await update.message.reply_text(
            "ğŸ”„ *Ø§Ù„Ø¥Ø¯ØºØ§Ù… (ÙÙŠ Ø§Ù„Ù†ÙˆÙ† Ø§Ù„Ø³Ø§ÙƒÙ†Ø© ÙˆØ§Ù„ØªÙ†ÙˆÙŠÙ†):*\n"
            "Ù‡Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù†ÙˆÙ† Ø£Ùˆ Ø§Ù„ØªÙ†ÙˆÙŠÙ† ÙÙŠ Ø§Ù„Ø­Ø±Ù Ø§Ù„ØªØ§Ù„ÙŠØŒ Ø¨Ø­ÙŠØ« ÙŠØµÙŠØ±Ø§Ù† Ø­Ø±ÙÙ‹Ø§ ÙˆØ§Ø­Ø¯Ù‹Ø§ Ù…Ø´Ø¯Ø¯Ù‹Ø§.\n"
            "ğŸ§  Ø§Ù„Ø­Ø±ÙˆÙ: (ÙŠØŒ Ø±ØŒ Ù…ØŒ Ù„ØŒ ÙˆØŒ Ù†) â€” Ù…Ø¬Ù…ÙˆØ¹Ø© ÙÙŠ ÙƒÙ„Ù…Ø© *ÙŠØ±Ù…Ù„ÙˆÙ†*\n"
            "â€¢ Ø¥Ø¯ØºØ§Ù… Ø¨ØºÙ†Ø©: (ÙŠØŒ Ù†ØŒ Ù…ØŒ Ùˆ)\n"
            "â€¢ Ø¥Ø¯ØºØ§Ù… Ø¨ØºÙŠØ± ØºÙ†Ø©: (Ø±ØŒ Ù„)\n"
            "ğŸ§ª *Ø£Ù…Ø«Ù„Ø©:*\n"
            "â€¢ ï´¿Ù…ÙÙ†Ù’ Ù…ÙØ§Ù„Ùï´¾ â†’ Ù…ÙÙ…Ù‘ÙØ§Ù„Ù\n"
            "â€¢ ï´¿Ù…ÙÙ†Ù’ ÙŠÙÙ‚ÙÙˆÙ„Ùï´¾ â†’ Ù…ÙÙ€ÙŠÙ‘ÙÙ‚ÙÙˆÙ„Ù\n"
            "â€¢ ï´¿ØºÙÙÙÙˆØ±ÙŒ Ø±Ù‘ÙØ­ÙÙŠÙ…ÙŒï´¾ â†’ ØºÙÙÙÙˆØ±ÙØ±Ù‘ÙØ­ÙÙŠÙ…ÙŒ",
            parse_mode="Markdown"
        )

    if text == "Ù† Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¨":
        return await update.message.reply_text(
            "ğŸ” *Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¨ (ÙÙŠ Ø§Ù„Ù†ÙˆÙ† Ø§Ù„Ø³Ø§ÙƒÙ†Ø© ÙˆØ§Ù„ØªÙ†ÙˆÙŠÙ†):*\n"
            "Ù‡Ùˆ Ù‚Ù„Ø¨ Ø§Ù„Ù†ÙˆÙ† Ø§Ù„Ø³Ø§ÙƒÙ†Ø© Ø£Ùˆ Ø§Ù„ØªÙ†ÙˆÙŠÙ† Ø¥Ù„Ù‰ Ù…ÙŠÙ… Ø®ÙÙŠÙØ© Ø¥Ø°Ø§ Ø¬Ø§Ø¡ Ø¨Ø¹Ø¯Ù‡Ø§ Ø­Ø±Ù Ø§Ù„Ø¨Ø§Ø¡.\n"
            "ğŸ§  Ø§Ù„Ø­Ø±Ù Ø§Ù„ÙˆØ­ÙŠØ¯: (Ø¨)\n"
            "ğŸ§ª *Ø£Ù…Ø«Ù„Ø©:*\n"
            "â€¢ ï´¿Ø³ÙÙ…ÙÙŠØ¹ÙŒ Ø¨ÙØµÙÙŠØ±ÙŒï´¾ â†’ Ø³ÙÙ…ÙÙŠØ¹ÙŒÙ…Ù’ Ø¨ÙØµÙÙŠØ±ÙŒ\n"
            "â€¢ ï´¿Ù…ÙÙ†Ù’ Ø¨ÙØ¹Ù’Ø¯Ùï´¾ â†’ Ù…ÙÙ…Ù’ Ø¨ÙØ¹Ù’Ø¯Ù\n"
            "â€¢ ï´¿Ø¥ÙÙ†Ù’ Ø¨ÙØ¹ÙØ«Ùï´¾ â†’ Ø¥ÙÙ…Ù’ Ø¨ÙØ¹ÙØ«Ù",
            parse_mode="Markdown"
        )

    if text == "Ù† Ø§Ù„Ø¥Ø®ÙØ§Ø¡":
        return await update.message.reply_text(
            "ğŸ§ *Ø§Ù„Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ (ÙÙŠ Ø§Ù„Ù†ÙˆÙ† Ø§Ù„Ø³Ø§ÙƒÙ†Ø© ÙˆØ§Ù„ØªÙ†ÙˆÙŠÙ†):*\n"
            "Ù‡Ùˆ Ù†Ø·Ù‚ Ø§Ù„Ù†ÙˆÙ† Ø£Ùˆ Ø§Ù„ØªÙ†ÙˆÙŠÙ† Ø¨ØµÙˆØª Ø®Ø§ÙØª Ø¨ÙŠÙ† Ø§Ù„Ø¥Ø¸Ù‡Ø§Ø± ÙˆØ§Ù„Ø¥Ø¯ØºØ§Ù… Ù…Ø¹ ØºÙ†Ø©.\n"
            "ğŸ§  Ø§Ù„Ø­Ø±ÙˆÙ: Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø­Ø±ÙˆÙ (15 Ø­Ø±ÙÙ‹Ø§) Ù…Ø§ Ø¹Ø¯Ø§ Ø­Ø±ÙˆÙ Ø§Ù„Ø¥Ø¸Ù‡Ø§Ø± ÙˆØ§Ù„Ø¥Ø¯ØºØ§Ù… ÙˆØ§Ù„Ø¥Ù‚Ù„Ø§Ø¨.\n"
            "ğŸ§ª *Ø£Ù…Ø«Ù„Ø©:*\n"
            "â€¢ ï´¿Ù…ÙÙ†Ù’ ØµÙÙ„ÙØ§Ø©Ùï´¾\n"
            "â€¢ ï´¿Ø£ÙÙ†Ù’Ø°ÙØ±Ù’ØªÙÙ‡ÙÙ…Ù’ï´¾\n"
            "â€¢ ï´¿ÙŠÙÙ†Ù’ÙÙÙ‚ÙÙˆÙ†Ùï´¾",
            parse_mode="Markdown"
        )
    # Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ù…ÙŠÙ… Ø§Ù„Ø³Ø§ÙƒÙ†Ø©
    if text == "Ù… Ø§Ù„Ø¥Ø¸Ù‡Ø§Ø±":
        return await update.message.reply_text(
            "ğŸ”¹ *Ø§Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø´ÙÙˆÙŠ (ÙÙŠ Ø§Ù„Ù…ÙŠÙ… Ø§Ù„Ø³Ø§ÙƒÙ†Ø©):*\n"
            "Ù‡Ùˆ Ù†Ø·Ù‚ Ø§Ù„Ù…ÙŠÙ… Ø§Ù„Ø³Ø§ÙƒÙ†Ø© Ø¨ÙˆØ¶ÙˆØ­ Ø¥Ø°Ø§ Ø¬Ø§Ø¡ Ø¨Ø¹Ø¯Ù‡Ø§ Ø£ÙŠ Ø­Ø±Ù Ù…Ø§ Ø¹Ø¯Ø§ Ø§Ù„Ø¨Ø§Ø¡ ÙˆØ§Ù„Ù…ÙŠÙ….\n"
            "ğŸ§  Ø§Ù„Ø­Ø±ÙˆÙ: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø±ÙˆÙ Ù…Ø§ Ø¹Ø¯Ø§ (Ø¨ØŒ Ù…)\n"
            "ğŸ§ª *Ø£Ù…Ø«Ù„Ø©:*\n"
            "â€¢ ï´¿Ù„ÙÙ‡ÙÙ…Ù’ Ø£ÙØ¬Ù’Ø±ÙŒï´¾\n"
            "â€¢ ï´¿ÙÙÙ‡ÙÙ…Ù’ Ø®ÙØ§Ù„ÙØ¯ÙÙˆÙ†Ùï´¾\n"
            "â€¢ ï´¿Ø¹ÙÙ„ÙÙŠÙ’Ù‡ÙÙ…Ù’ Ù‚ÙØªÙØ§Ù„ÙŒï´¾",
            parse_mode="Markdown"
        )

    if text == "Ù… Ø§Ù„Ø¥Ø¯ØºØ§Ù…":
        return await update.message.reply_text(
            "ğŸ”„ *Ø§Ù„Ø¥Ø¯ØºØ§Ù… Ø§Ù„Ø´ÙÙˆÙŠ (ÙÙŠ Ø§Ù„Ù…ÙŠÙ… Ø§Ù„Ø³Ø§ÙƒÙ†Ø©):*\n"
            "Ù‡Ùˆ Ø¥Ø¯ØºØ§Ù… Ø§Ù„Ù…ÙŠÙ… Ø§Ù„Ø³Ø§ÙƒÙ†Ø© ÙÙŠ Ù…ÙŠÙ… Ù…ØªØ­Ø±ÙƒØ© Ø¨Ø¹Ø¯Ù‡Ø§ØŒ Ø¨Ø­ÙŠØ« ØªØµÙŠØ±Ø§Ù† Ù…ÙŠÙ…Ù‹Ø§ Ù…Ø´Ø¯Ø¯Ø©.\n"
            "ğŸ§  Ø§Ù„Ø­Ø±Ù Ø§Ù„ÙˆØ­ÙŠØ¯: (Ù…)\n"
            "ğŸ§ª *Ø£Ù…Ø«Ù„Ø©:*\n"
            "â€¢ ï´¿ÙƒÙÙ…Ù’ Ù…ÙØ«Ù’Ù„ÙÙ‡Ùï´¾ â†’ ÙƒÙÙ…Ù’Ù…ÙØ«Ù’Ù„ÙÙ‡Ù\n"
            "â€¢ ï´¿Ù„ÙÙ‡ÙÙ…Ù’ Ù…ÙØºÙ’ÙÙØ±ÙØ©ÙŒï´¾ â†’ Ù„ÙÙ‡ÙÙ…Ù’Ù…ÙØºÙ’ÙÙØ±ÙØ©ÙŒ\n"
            "â€¢ ï´¿ÙÙÙ‡ÙÙ…Ù’ Ù…Ù‘ÙÙ‡Ù’ØªÙØ¯ÙÙˆÙ†Ùï´¾ â†’ ÙÙÙ‡ÙÙ…Ù’Ù…ÙÙ‡Ù’ØªÙØ¯ÙÙˆÙ†Ù",
            parse_mode="Markdown"
        )

    if text == "Ù… Ø§Ù„Ø¥Ø®ÙØ§Ø¡":
        return await update.message.reply_text(
            "ğŸ§ *Ø§Ù„Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø´ÙÙˆÙŠ (ÙÙŠ Ø§Ù„Ù…ÙŠÙ… Ø§Ù„Ø³Ø§ÙƒÙ†Ø©):*\n"
            "Ù‡Ùˆ Ù†Ø·Ù‚ Ø§Ù„Ù…ÙŠÙ… Ø§Ù„Ø³Ø§ÙƒÙ†Ø© Ø¨ØµÙˆØª Ø®Ø§ÙØª Ù…Ø¹ ØºÙ†Ø© Ø¥Ø°Ø§ Ø¬Ø§Ø¡ Ø¨Ø¹Ø¯Ù‡Ø§ Ø­Ø±Ù Ø§Ù„Ø¨Ø§Ø¡.\n"
            "ğŸ§  Ø§Ù„Ø­Ø±Ù Ø§Ù„ÙˆØ­ÙŠØ¯: (Ø¨)\n"
            "ğŸ§ª *Ø£Ù…Ø«Ù„Ø©:*\n"
            "â€¢ ï´¿ØªÙØ±Ù’Ù…ÙÙŠÙ‡ÙÙ…Ù’ Ø¨ÙØ­ÙØ¬ÙØ§Ø±ÙØ©Ùï´¾\n"
            "â€¢ ï´¿Ù‡ÙÙ…Ù’ Ø¨ÙØ±ÙØ¨Ù‘ÙÙ‡ÙÙ…Ù’ï´¾\n"
            "â€¢ ï´¿Ø¹ÙÙ„ÙÙŠÙ’Ù‡ÙÙ…Ù’ Ø¨ÙØ±ÙÙˆÙ‚ÙŒï´¾",
            parse_mode="Markdown"
        )

    # Ø§Ù„Ù…Ø¯ÙˆØ¯
    if text == "Ù…Ø¯ Ø·Ø¨ÙŠØ¹ÙŠ":
        return await update.message.reply_text(
            "ğŸ“ *Ø§Ù„Ù…Ø¯ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ (Ø§Ù„Ø£ØµÙ„ÙŠ):*\n"
            "Ù‡Ùˆ Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠØªÙˆÙ‚Ù Ø¹Ù„Ù‰ Ø³Ø¨Ø¨ØŒ ÙˆÙŠÙÙ…Ø¯ Ø¨Ù…Ù‚Ø¯Ø§Ø± Ø­Ø±ÙƒØªÙŠÙ†.\n"
            "ğŸ§  Ø­Ø±ÙˆÙÙ‡: Ø§Ù„Ø£Ù„ÙØŒ Ø§Ù„ÙˆØ§ÙˆØŒ Ø§Ù„ÙŠØ§Ø¡ Ø§Ù„Ø³Ø§ÙƒÙ†Ø© Ø§Ù„Ù…Ø³Ø¨ÙˆÙ‚Ø© Ø¨Ø­Ø±ÙƒØ© Ù…Ù† Ø¬Ù†Ø³Ù‡Ø§.\n"
            "ğŸ§ª *Ø£Ù…Ø«Ù„Ø©:*\n"
            "â€¢ ï´¿Ù‚ÙØ§Ù„Ùï´¾\n"
            "â€¢ ï´¿ÙŠÙÙ‚ÙÙˆÙ„Ùï´¾\n"
            "â€¢ ï´¿ÙÙÙŠÙ‡Ùï´¾",
            parse_mode="Markdown"
        )

    if text == "Ù…Ø¯ Ù„Ø§Ø²Ù…":
        return await update.message.reply_text(
            "ğŸ“ *Ø§Ù„Ù…Ø¯ Ø§Ù„Ù„Ø§Ø²Ù…:*\n"
            "Ù‡Ùˆ Ø§Ù„Ø°ÙŠ ÙŠØ£ØªÙŠ Ø¨Ø¹Ø¯Ù‡ Ø­Ø±Ù Ø³Ø§ÙƒÙ† Ø£ØµÙ„ÙŠØŒ ÙˆÙŠÙÙ…Ø¯ 6 Ø­Ø±ÙƒØ§Øª ÙˆØ¬ÙˆØ¨Ù‹Ø§.\n"
            "ğŸ§  Ø£Ù†ÙˆØ§Ø¹Ù‡: ÙƒÙ„Ù…ÙŠ Ù…Ø«Ù‚Ù„ØŒ ÙƒÙ„Ù…ÙŠ Ù…Ø®ÙÙØŒ Ø­Ø±ÙÙŠ Ù…Ø«Ù‚Ù„ØŒ Ø­Ø±ÙÙŠ Ù…Ø®ÙÙ.\n"
            "ğŸ§ª *Ø£Ù…Ø«Ù„Ø©:*\n"
            "â€¢ ï´¿Ø§Ù„Ø¶Ù‘ÙØ§Ù„Ù‘ÙÙŠÙ†Ùï´¾\n"
            "â€¢ ï´¿Ø§Ù„Ù’Ø­ÙØ§Ù‚Ù‘ÙØ©Ùï´¾\n"
            "â€¢ ï´¿Ø§Ù„ØµÙ‘ÙØ§Ø®Ù‘ÙØ©Ùï´¾",
            parse_mode="Markdown"
        )

    if text == "Ù…Ø¯ Ù…ØªØµÙ„":
        return await update.message.reply_text(
            "ğŸ“ *Ø§Ù„Ù…Ø¯ Ø§Ù„Ù…ØªØµÙ„:*\n"
            "Ù‡Ùˆ Ø£Ù† ÙŠØ£ØªÙŠ Ø­Ø±Ù Ø§Ù„Ù…Ø¯ ÙˆØ¨Ø¹Ø¯Ù‡ Ù‡Ù…Ø²Ø© ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙƒÙ„Ù…Ø©ØŒ ÙˆÙŠÙÙ…Ø¯ 4â€“5 Ø­Ø±ÙƒØ§Øª.\n"
            "ğŸ§ª *Ø£Ù…Ø«Ù„Ø©:*\n"
            "â€¢ ï´¿Ø¬ÙØ§Ø¡Ùï´¾\n"
            "â€¢ ï´¿Ø³ÙÙˆØ¡Ùï´¾\n"
            "â€¢ ï´¿Ø¨ÙØ±ÙÙŠØ¡ÙŒï´¾",
            parse_mode="Markdown"
        )

    if text == "Ù…Ø¯ Ù…Ù†ÙØµÙ„":
        return await update.message.reply_text(
            "ğŸ“ *Ø§Ù„Ù…Ø¯ Ø§Ù„Ù…Ù†ÙØµÙ„:*\n"
            "Ù‡Ùˆ Ø£Ù† ÙŠØ£ØªÙŠ Ø­Ø±Ù Ø§Ù„Ù…Ø¯ ÙÙŠ Ø¢Ø®Ø± Ø§Ù„ÙƒÙ„Ù…Ø©ØŒ ÙˆØ§Ù„Ù‡Ù…Ø²Ø© ÙÙŠ Ø£ÙˆÙ„ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©.\n"
            "ğŸ§  ÙŠÙÙ…Ø¯ 4â€“5 Ø­Ø±ÙƒØ§Øª.\n"
            "ğŸ§ª *Ø£Ù…Ø«Ù„Ø©:*\n"
            "â€¢ ï´¿ÙŠÙØ§ Ø£ÙÙŠÙ‘ÙÙ‡ÙØ§ï´¾\n"
            "â€¢ ï´¿Ø¥ÙÙ†Ù‘ÙØ§ Ø£ÙÙ†Ù’Ø²ÙÙ„Ù’Ù†ÙØ§Ù‡Ùï´¾\n"
            "â€¢ ï´¿Ù‚ÙÙˆÙ„ÙÙˆØ§ Ø¢Ù…ÙÙ†Ù‘ÙØ§ï´¾",
            parse_mode="Markdown"
        )
    if text == "Ø¨Ø³Ù…Ù„Ø©":
        return await update.message.reply_text(
            "ğŸŒ¸ *Ø§Ù„Ø¨Ø³Ù…Ù„Ø©:*\n"
            "ï´¿Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø§Ù„Ø±Ù‘ÙØ­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±Ù‘ÙØ­ÙÙŠÙ…Ùï´¾\n\n"
            "ğŸ“– *ØªØ¹Ø±ÙŠÙÙ‡Ø§:*\n"
            "Ø§Ù„Ø¨Ø³Ù…Ù„Ø© ØªÙÙ‚Ø§Ù„ Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ„Ø§ÙˆØ©ØŒ ÙˆÙ‡ÙŠ Ø¢ÙŠØ© Ù…Ù† Ø³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Ø©.\n\n"
            "ğŸ“Œ *Ø£Ø­ÙƒØ§Ù…Ù‡Ø§:*\n"
            "â€¢ ØªÙÙ‚Ø±Ø£ ÙÙŠ Ø¨Ø¯Ø§ÙŠØ© ÙƒÙ„ Ø³ÙˆØ±Ø© Ù…Ø§ Ø¹Ø¯Ø§ Ø§Ù„ØªÙˆØ¨Ø©.\n"
            "â€¢ Ø¥Ø°Ø§ Ø¨Ø¯Ø£Øª Ù…Ù† ÙˆØ³Ø· Ø§Ù„Ø³ÙˆØ±Ø©ØŒ ÙØ§Ù„Ù‚Ø§Ø±Ø¦ Ù…ÙØ®ÙŠÙ‘Ø± Ø¨ÙŠÙ† Ø§Ù„Ø¥ØªÙŠØ§Ù† Ø¨Ù‡Ø§ Ø£Ùˆ ØªØ±ÙƒÙ‡Ø§.\n"
            "â€¢ Ù„Ø§ ÙŠØ¬ÙˆØ² ÙˆØµÙ„ Ø¢Ø®Ø± Ø§Ù„Ø³ÙˆØ±Ø© Ø¨Ø§Ù„Ø¨Ø³Ù…Ù„Ø© Ø«Ù… Ø§Ù„ÙˆÙ‚ÙˆÙ.\n\n"
            "ğŸ§ª *Ù…Ø«Ø§Ù„:* ï´¿Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø§Ù„Ø±Ù‘ÙØ­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±Ù‘ÙØ­ÙÙŠÙ…Ù * Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„Ù‘ÙÙ‡Ù Ø±ÙØ¨Ù‘Ù Ø§Ù„Ù’Ø¹ÙØ§Ù„ÙÙ…ÙÙŠÙ†Ùï´¾",
            parse_mode="Markdown"
        )

# Ù„Ø§ ÙŠÙˆØ¬Ø¯ else Ø£Ùˆ Ø±Ø¯ Ø§ÙØªØ±Ø§Ø¶ÙŠ â€” Ø¥Ø°Ø§ Ù„Ù… ÙŠØªØ­Ù‚Ù‚ Ø£ÙŠ Ø´Ø±Ø·ØŒ Ù„Ø§ ÙŠØ±Ø¯ Ø§Ù„Ø¨ÙˆØª

# â€”â€” ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙˆØª
def main():
    if not TOKEN:
        print("âŒ TOKEN not set.")
        return

    threading.Thread(target=spawn_health_server, daemon=True).start()

    app = ApplicationBuilder().token(TOKEN).build()
    app.add_handler(CommandHandler("start", start))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))

    print(f"âœ… Bot started â€” health endpoint on port {PORT}")
    app.run_polling()

if __name__ == "__main__":
    main()
